<div class="sessions-grid" *ngIf="rows.length > 0; else tplEmpty">
  <ng-container *ngFor="let row of rows; trackBy: trackById">
    <div class="col-description flex flex-col">
      <input
        class="block w-full h-full input"
        type="text"
        name="value"
        placeholder="Description"
        [(ngModel)]="row.description"
        [ngModelOptions]="{ standalone: true }"
        (blur)="onDescriptionChange(row)"
        (keyup.enter)="onDescriptionChange(row)"
        (keyup.escape)="resetRow(row)"
      />
      <div class="flex gap-2">
        <span
          *ngFor="let tag of row.session | sessionTags : tags; trackBy: trackByTagId"
          class="text-gray-300"
          >#{{ tag.caption }}</span
        >
      </div>
    </div>

    <div class="col-start">
      <input
        class="block w-full h-full input"
        type="text"
        placeholder="Start"
        [(ngModel)]="row.start"
        [ngModelOptions]="{ standalone: true }"
        (keyup.enter)="onStartChange(row)"
        (blur)="onStartChange(row)"
        (keyup.escape)="resetRow(row)"
      />
    </div>

    <div class="col-end">
      <input
        class="block w-full h-full input"
        type="text"
        placeholder="End"
        [(ngModel)]="row.end"
        [ngModelOptions]="{ standalone: true }"
        (keyup.enter)="onEndChange(row)"
        (blur)="onEndChange(row)"
        (keyup.escape)="resetRow(row)"
      />
    </div>

    <div class="col-duration">
      <input
        class="block w-full h-full input"
        type="text"
        placeholder="Duration"
        [(ngModel)]="row.duration"
        [ngModelOptions]="{ standalone: true }"
        (keyup.enter)="onDurationChange(row)"
        (blur)="onDurationChange(row)"
        (keyup.escape)="resetRow(row)"
      />
    </div>

    <div class="col-menu grid grid-cols-2">
      <button
        class="btn-icon"
        [ttDatePicker]="row.session.start"
        (ttDatePickerChange)="onChangeDate(row, $event)"
      >
        <svg [ttIcon]="'calendar-outline'"></svg>
      </button>
      <button
        class="btn-icon"
        [cdkMenuTriggerFor]="menu"
        [cdkMenuTriggerData]="{ $implicit: row.id }"
      >
        <svg [ttIcon]="'dots-vertical'"></svg>
      </button>
    </div>
  </ng-container>
</div>

<ng-template #menu let-id>
  <div class="menu" cdkMenu>
    <button class="menu-item" cdkMenuItem (click)="onDeleteSession(id)">Delete</button>
  </div>
</ng-template>

<ng-template #tplEmpty>
  <div class="text-center leading-12">There is no any session</div>
</ng-template>
