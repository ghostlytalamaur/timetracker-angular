<tt-top-bar-layout>
  <div class="px-2" *ngrxLet="vm$; let vm">
    <ng-container *ttLoader="vm.status">
      <tt-session-recorder
        class="mt-2"
        [session]="vm.activeSession"
        (startSession)="onStartSession($event)"
        (stopSession)="onStopSession($event)"
        (sessionChange)="onActiveSessionChange($event)"
        (discardSession)="onDiscardSession()"
      ></tt-session-recorder>
      <div class="flex justify-end px-1 py-2">
        <tt-date-range-picker
          class="self-end"
          [range]="vm.range"
          (rangeChange)="onRangeChange($event)"
        ></tt-date-range-picker>
      </div>

      <div class="grid gap-2">
        <tt-sessions-group
          *ngFor="let group of vm.groups; trackBy: trackById"
          [group]="group"
          [tags]="vm.tags"
          (sessionChange)="onSessionChange($event)"
          (deleteSession)="onDeleteSession($event)"
        ></tt-sessions-group>
      </div>
    </ng-container>
  </div>
</tt-top-bar-layout>
